<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head') %>
</head>
<body class="bg-[var(--admin-bg)] flex font-sans antialiased text-[var(--admin-text-main)] h-screen overflow-hidden selection:bg-purple-500 selection:text-white transition-colors duration-300">

    <%- include('./includes/navigation') %>

    <main class="flex-grow h-screen overflow-y-auto w-full relative">
        <!-- Header -->
        <header class="bg-[var(--admin-bg)]/95 backdrop-blur-sm h-16 flex items-center justify-between px-8 sticky top-0 z-20 transition-colors duration-300">
            <h2 class="text-xl font-bold text-[var(--admin-text-main)]"><% if (editing) { %>Edit Product<% } else { %>Add Product<% } %></h2>
            <a href="/admin/products" class="text-[var(--admin-text-muted)] hover:text-[var(--admin-text-main)] flex items-center gap-2 text-sm font-bold transition-colors">
                <i class="ri-arrow-left-line"></i> Back to Inventory
            </a>
        </header>

        <div class="p-8 max-w-4xl mx-auto">
            
            <div class="bg-[var(--admin-card)] rounded-xl border border-[var(--admin-border)] shadow-lg p-8">
                <form action="/admin/<% if (editing) { %>edit-product<% } else { %>add-product<% } %>" method="POST" class="space-y-6">
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Name -->
                        <div class="md:col-span-2">
                            <label for="name" class="block text-sm font-bold text-[var(--admin-text-muted)] mb-2">Product Name</label>
                            <input type="text" name="name" id="name" value="<% if (editing) { %><%= product.name %><% } %>" class="w-full bg-[var(--admin-hover)] border border-[var(--admin-border)] text-[var(--admin-text-main)] rounded-lg px-4 py-3 focus:outline-none focus:border-[#0071dc] transition-colors placeholder-gray-400" placeholder="e.g. MacBook Pro M1 13-inch" required>
                        </div>

                        <!-- Brand -->
                        <div>
                            <label for="brand" class="block text-sm font-bold text-[var(--admin-text-muted)] mb-2">Brand</label>
                             <select name="brand" id="brand" class="w-full bg-[var(--admin-hover)] border border-[var(--admin-border)] text-[var(--admin-text-main)] rounded-lg px-4 py-3 focus:outline-none focus:border-[#0071dc] transition-colors" required>
                                <option value="" disabled selected>Select Brand</option>
                                <option value="Apple" <% if (editing && product.brand === 'Apple') { %>selected<% } %>>Apple</option>
                                <option value="Dell" <% if (editing && product.brand === 'Dell') { %>selected<% } %>>Dell</option>
                                <option value="HP" <% if (editing && product.brand === 'HP') { %>selected<% } %>>HP</option>
                                <option value="Lenovo" <% if (editing && product.brand === 'Lenovo') { %>selected<% } %>>Lenovo</option>
                                <option value="Samsung" <% if (editing && product.brand === 'Samsung') { %>selected<% } %>>Samsung</option>
                                <option value="LG" <% if (editing && product.brand === 'LG') { %>selected<% } %>>LG</option>
                                <option value="BenQ" <% if (editing && product.brand === 'BenQ') { %>selected<% } %>>BenQ</option>
                                <option value="Acer" <% if (editing && product.brand === 'Acer') { %>selected<% } %>>Acer</option>
                                <option value="MSI" <% if (editing && product.brand === 'MSI') { %>selected<% } %>>MSI</option>
                            </select>
                        </div>

                        <!-- Category -->
                        <div>
                            <label for="category" class="block text-sm font-bold text-[var(--admin-text-muted)] mb-2">Category</label>
                            <select name="category" id="category" class="w-full bg-[var(--admin-hover)] border border-[var(--admin-border)] text-[var(--admin-text-main)] rounded-lg px-4 py-3 focus:outline-none focus:border-[#0071dc] transition-colors" required>
                                <option value="" disabled <% if (!editing && !category) { %>selected<% } %>>Select Category</option>
                                <option value="laptop" <% if ((editing && product.category === 'laptop') || (!editing && category === 'laptop')) { %>selected<% } %>>Laptop</option>
                                <option value="desktop" <% if ((editing && product.category === 'desktop') || (!editing && category === 'desktop')) { %>selected<% } %>>Desktop</option>
                                <option value="monitor" <% if ((editing && product.category === 'monitor') || (!editing && category === 'monitor')) { %>selected<% } %>>Monitor</option>
                                <option value="accessory" <% if ((editing && product.category === 'accessory') || (!editing && category === 'accessory')) { %>selected<% } %>>Accessory</option>
                            </select>
                        </div>

                        <!-- Price -->
                        <div>
                            <label for="price" class="block text-sm font-bold text-[var(--admin-text-muted)] mb-2">Selling Price (₹)</label>
                            <input type="number" name="price" id="price" value="<% if (editing) { %><%= product.price %><% } %>" class="w-full bg-[var(--admin-hover)] border border-[var(--admin-border)] text-[var(--admin-text-main)] rounded-lg px-4 py-3 focus:outline-none focus:border-[#0071dc] transition-colors" required>
                        </div>

                        <!-- MRP -->
                        <div>
                            <label for="mrp" class="block text-sm font-bold text-[var(--admin-text-muted)] mb-2">MRP (₹)</label>
                            <input type="number" name="mrp" id="mrp" value="<% if (editing) { %><%= product.mrp %><% } %>" class="w-full bg-[var(--admin-hover)] border border-[var(--admin-border)] text-[var(--admin-text-main)] rounded-lg px-4 py-3 focus:outline-none focus:border-[#0071dc] transition-colors" required>
                        </div>

                         <!-- Discount (Auto-calculated ideally, but manual for now) -->
                         <div>
                            <label for="discount" class="block text-sm font-bold text-[var(--admin-text-muted)] mb-2">Discount (%)</label>
                            <input type="number" name="discount" id="discount" value="<% if (editing) { %><%= product.discount %><% } %>" class="w-full bg-[var(--admin-hover)] border border-[var(--admin-border)] text-[var(--admin-text-main)] rounded-lg px-4 py-3 focus:outline-none focus:border-[#0071dc] transition-colors" required>
                        </div>

                        <!-- Quantity -->
                        <div>
                            <label for="quantity" class="block text-sm font-bold text-[var(--admin-text-muted)] mb-2">Stock Quantity</label>
                            <input type="number" name="quantity" id="quantity" value="<% if (editing) { %><%= product.quantity %><% } %>" class="w-full bg-[var(--admin-hover)] border border-[var(--admin-border)] text-[var(--admin-text-main)] rounded-lg px-4 py-3 focus:outline-none focus:border-[#0071dc] transition-colors" required>
                        </div>

                        <!-- Image URL -->
                        <div class="md:col-span-2">
                            <label for="image" class="block text-sm font-bold text-[var(--admin-text-muted)] mb-2">Image URL</label>
                            <input type="text" name="image" id="image" value="<% if (editing) { %><%= product.image %><% } %>" class="w-full bg-[var(--admin-hover)] border border-[var(--admin-border)] text-[var(--admin-text-main)] rounded-lg px-4 py-3 focus:outline-none focus:border-[#0071dc] transition-colors" placeholder="https://..." required>
                        </div>

                         <!-- Description -->
                         <div class="md:col-span-2">
                            <label for="description" class="block text-sm font-bold text-[var(--admin-text-muted)] mb-2">Description</label>
                            <textarea name="description" id="description" rows="5" class="w-full bg-[var(--admin-hover)] border border-[var(--admin-border)] text-[var(--admin-text-main)] rounded-lg px-4 py-3 focus:outline-none focus:border-[#0071dc] transition-colors"><% if (editing) { %><%= product.description %><% } %></textarea>
                        </div>

                    </div>

                    <% if (editing) { %>
                        <input type="hidden" name="productId" value="<%= product._id %>">
                    <% } %>

                    <div class="pt-6 border-t border-[var(--admin-border)] flex justify-end gap-4">
                        <a href="/admin/products" class="px-6 py-3 rounded-lg border border-[var(--admin-border)] text-[var(--admin-text-muted)] hover:text-[var(--admin-text-main)] hover:bg-[var(--admin-hover)] font-bold transition-all">Cancel</a>
                        <button type="submit" class="px-8 py-3 rounded-lg bg-[#0071dc] hover:bg-blue-600 text-white font-bold shadow-lg hover:shadow-xl transition-all">
                            <% if (editing) { %>Update Product<% } else { %>Create Product<% } %>
                        </button>
                    </div>

                </form>
            </div>

        </div>
    </main>
</body>
</html>
